<!DOCTYPE html>
<html>

<head>
    
    <title>PSFIST</title>
    
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    
    <link rel="stylesheet" href="PSFIST.css">
    
    <!--GOOGLE FONT-->
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open Sans">
    
    <!--DATEPICKER-->
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    
	<script>
		$(function() {
		$( "#date" ).datepicker({maxDate: "+0D" });
		});
	</script>
    
</head>

<body>
    
    
    <div id="contents">
        
        <div id="instructions">Welcome to PSFIST</br>
        &nbsp;&nbsp;- Navigate using the 'Next' and 'Previous' buttons</br>
        &nbsp;&nbsp;- All fields are required, except for 'notes'
        </div>

    <form id="PSFIST_form" name="PSFIST_form">
        
        <div id="global_entries">
        
            <div class="page_header"><div class="page_header_text">1. Survey info</div></div>
            
        <div class="entry">    
        Volunteer name</br>
        <input type="text" class="form_field" id="volunteer_name" name="volunteer">
        </div>
        
        <div class="entry">
        Date</br>
        <input type="text" class="form_field" id="date" name="date" placeholder="Please select from the calendar">
        </div>
    
        <div class="entry">
        Time</br>
        <select class="form_field" id="hour" name="hour"><option value="unchanged" disabled selected>Hour</option></select> : <select id="minute" name="minute"><option value="unchanged" disabled selected>Min</option></select> <select id="ampm" name="ampm"><option value="unchanged" disabled selected>AM/PM</option><option value="am">AM</option><option value="pm">PM</option></select>
        </div>

        <div class="entry">
        Duration (minutes)</br>
        <select class="form_field" id="duration" name="duration">
            <option value="unchanged" disabled selected>Select duration</option>
        </select>
        </div>

        <div class="entry">
        Weather</br>
        <select class="form_field" id="weather" name="weather">
            <option value="unchanged" disabled selected>Select weather</option>
            <option value="sunny">Sunny</option>
            <option value="partly cloudy">Partly cloudy</option>
            <option value="cloudy">Cloudy</option>
            <option value="light rain">Light rain</option>
            <option value="rain">Rain</option>
            <option value="fog">Fog</option>
        </select>
        </div>

        <div class="entry">
        Route</br>
        <select class="form_field" id="routeSelect" name="route">
            <option class="route" value="unchanged" disabled selected>Select route</option>
            <option class="route" value="brooklyn_public_library" data-sites="1">Brooklyn Public Library</option>
            <option class="route" value="bryant_park" data-sites="4">Bryant Park</option>
            <option class="route" value="columbia_university_lerner" data-sites="1">Columbia University - Lerner</option>
            <option class="route" value="columbia_university_northwest_corner" data-sites="1">Columbia University - Northwest Corner</option>
            <option class="route" value="exxon" data-sites="4">Exxon - 1251 6th Avenue</option>
            <option class="route" value="ford_foundation_building" data-sites="3">Ford Foundation Building</option>
            <option class="route" value="javits" data-sites="8">Javits</option>
            <option class="route" value="lic_court_square" data-sites="7">LIC - Court Square</option>
            <option class="route" value="metropolitan_museum_of_art" data-sites="7">Metropolitan Museum of Art</option>
            <option class="route" value="richard_meyer_building" data-sites="1">Richard Meier Building</option>
            <option class="route" value="wfc_freedom_tower" data-sites="4">WFC - Freedom Tower</option>
            <option class="route" value="wfc_goldman_sachs" data-sites="3">WFC - Goldman Sachs</option>
            <option class="route" value="wfc_brookfield_place" data-sites="18">WFC - Brookfield Place</option>
        </select>
        </div>

        </div>

        <button class="navigation next" id="next" type="button">Next</button>
        
        <div id="sites"></div>

        

      


        <div id="summary">
            <div class="page_header"><div class="page_header_text">3. Report summary</div></div>
            <div class="site_summary_header">Route info</div>
            <div id="route-summary">
            Name: <div class="summary_field" id="summary_name"></div></br>
            Date: <div class="summary_field" id="summary_date"></div></br>
            Time: <div class="summary_field" id="summary_time"></div></br>
            Duration: <div class="summary_field" id="summary_duration"></div></br>
            Weather: <div class="summary_field" id="summary_weather"></div></br>
            Route: <div class="summary_field" id="summary_route"></div>
            </div>
            <div id="site_summaries"></div>
            <button type="button" class="navigation previous" id="previous_details">Previous</button>
        </div>




    </form>

    </div>
    

 
  
    
    <script>
        
        var hourList;

            for (h = 1; h <= 12; h++){
                if (h < 10){
                    h = "0" + h
                    };
                
                hourList += '<option value='+h+'>'+h+'</option>';
            };
        
        $('#hour').append(hourList);
        
        
        var minuteList;
        
           for (m = 0; m <= 59; m++){
                
                if (m < 10){
                    m = "0" + m
                };
                
                minuteList += '<option value='+m+'>'+m+'</option>';
            };
        
        $('#minute').append(minuteList);
        
        
        var durationList;
        
            for (d = 5; d <= 120; d+=5){
                durationList += '<option value='+d+'>'+d+'</option>';
            };
        
        $('#duration').append(durationList);
        
        
        
        
        
        
        
         
        var form = document.getElementById("step_one_form")  
        var route = document.getElementById("routeSelect");
        var routeValue;
        var numSelect;
        var numberSelect;
        var numberSelectValue;
        var siteCount;
        var siteName;
        var birdDetails;
        var y;
        
        var bird;
        
        var deadInjured;
        
        var routeFullName;
        
        
        //CREATES COUNTER FOR NUMBER OF BIRDS FOUND AT EACH SITE
        var birdCounterNone = '<option value="none">None</option>'
        var birdCounterNumbers;
            for (x = 1; x < 10; x++){
                birdCounterNumbers += '<option value='+x+'>'+x+'</option>';
            };
        var birdCounter = birdCounterNone + birdCounterNumbers;
        
        
        var speciesList = "<option disabled selected>Select species</option><option value='unknown'>unknown</option><option value='other'>other (describe in 'Notes')</option><option value='bat sp.'>bat sp.</option><option value='flycatcher sp.'>flycatcher sp.</option><option value='gull sp.'>gull sp.</option><option value='kinglet sp.'>kinglet sp.</option><option value='owl sp.'>owl sp.</option><option value='sparrow sp.'>sparrow sp.</option><option value='thrush sp.'>thrush sp.</option><option value='warbler sp.'>warbler sp.</option><option value='woodpecker sp.'>woodpecker sp.</option><option value='wren sp.'>wren sp.</option><option value='Alder Flycatcher'>Alder Flycatcher</option><option value='American Black Duck'>American Black Duck</option><option value='American Coot'>American Coot</option><option value='American Goldfinch'>American Goldfinch</option><option value='American Kestrel'>American Kestrel</option><option value='American Redstart'>American Redstart</option><option value='American Robin'>American Robin</option><option value='American Woodcock'>American Woodcock</option><option value='Baltimore Oriole'>Baltimore Oriole</option><option value='Barn Swallow'>Barn Swallow</option><option value='Bay-Breasted Warbler'>Bay-Breasted Warbler</option><option value='Belted Kingfisher'>Belted Kingfisher</option><option value='Black-and-white Warbler'>Black-and-white Warbler</option><option value='Black-billed Cuckoo'>Black-billed Cuckoo</option><option value='Black-capped Chickadee'>Black-capped Chickadee</option><option value='Blackpoll Warbler'>Blackpoll Warbler</option><option value='Black-throated Blue Warbler'>Black-throated Blue Warbler</option><option value='Black-throated Green Warbler'>Black-throated Green Warbler</option><option value='Blue Jay'>Blue Jay</option><option value='Blue-headed Vireo'>Blue-headed Vireo</option><option value='Blue-winged Warbler'>Blue-winged Warbler</option><option value='Brown Creeper'>Brown Creeper</option><option value='Brown Thrasher'>Brown Thrasher</option><option value='Brown-headed Cowbird'>Brown-headed Cowbird</option><option value='Canada Warbler'>Canada Warbler</option><option value='Cape May Warbler'>Cape May Warbler</option><option value='Cedar Waxwing'>Cedar Waxwing</option><option value='Chestnut-sided Warbler'>Chestnut-sided Warbler</option><option value='Chipping Sparrow'>Chipping Sparrow</option><option value='Chuck-wills-widow'>Chuck-will's-widow</option><option value='Clapper Rail'>Clapper Rail</option><option value='Common Grackle'>Common Grackle</option><option value='Common Yellowthroat'>Common Yellowthroat</option><option value='Connecticut Warbler'>Connecticut Warbler</option><option value='Dark-eyed Junco'>Dark-eyed Junco</option><option value='Downy Woodpecker'>Downy Woodpecker</option><option value='Eastern Bluebird'>Eastern Bluebird</option><option value='Eastern Kingbird'>Eastern Kingbird</option><option value='Eastern Phoebe'>Eastern Phoebe</option><option value='Eastern Towhee'>Eastern Towhee</option><option value='Eastern Wood-pewee'>Eastern Wood-pewee</option><option value='European Starling'>European Starling</option><option value='Field Sparrow'>Field Sparrow</option><option value='Fox Sparrow'>Fox Sparrow</option><option value='Golden-crowned Kinglet'>Golden-crowned Kinglet</option><option value='Gray Catbird'>Gray Catbird</option><option value='Gray-cheeked Thrush'>Gray-cheeked Thrush</option><option value='Great Crested Flycatcher'>Great Crested Flycatcher</option><option value='Hermit Thrush'>Hermit Thrush</option><option value='Hooded Warbler'>Hooded Warbler</option><option value='House Finch'>House Finch</option><option value='House Sparrow'>House Sparrow</option><option value='House Wren'>House Wren</option><option value='Indigo Bunting'>Indigo Bunting</option><option value='Kentucky Warbler'>Kentucky Warbler</option><option value='Lazuli Bunting'>Lazuli Bunting</option><option value='Least Flycatcher'>Least Flycatcher</option><option value='Lincolns Sparrow'>Lincoln's Sparrow</option><option value='Louisiana Waterthrush'>Louisiana Waterthrush</option><option value='Magnolia Warbler'>Magnolia Warbler</option><option value='Marsh Wren'>Marsh Wren</option><option value='Mourning Dove'>Mourning Dove</option><option value='Mourning Warbler'>Mourning Warbler</option><option value='Northern Cardinal'>Northern Cardinal</option><option value='Northern Flicker'>Northern Flicker</option><option value='Northern Mockingbird'>Northern Mockingbird</option><option value='Northern Parula'>Northern Parula</option><option value='Northern Waterthrush'>Northern Waterthrush</option><option value='Olive-sided Flycatcher'>Olive-sided Flycatcher</option><option value='Orchard Oriole'>Orchard Oriole</option><option value='Osprey'>Osprey</option><option value='Ovenbird'>Ovenbird</option><option value='Palm Warbler'>Palm Warbler</option><option value='Peregrine Falcon'>Peregrine Falcon</option><option value='Pine Warbler'>Pine Warbler</option><option value='Prairie Warbler'>Prairie Warbler</option><option value='Prothonotary Warbler'>Prothonotary Warbler</option><option value='Purple Finch'>Purple Finch</option><option value='Red-headed Woodpecker'>Red-headed Woodpecker</option><option value='Red-bellied Woodpecker'>Red-bellied Woodpecker</option><option value='Red-breasted Nuthatch'>Red-breasted Nuthatch</option><option value='Red-eyed Vireo'>Red-eyed Vireo</option><option value='Red-tailed Hawk'>Red-tailed Hawk</option><option value='Rock Pigeon'>Rock Pigeon</option><option value='Rose-breasted Grosbeak'>Rose-breasted Grosbeak</option><option value='Ruby-crowned Kinglet'>Ruby-crowned Kinglet</option><option value='Ruby-throated Hummingbird'>Ruby-throated Hummingbird</option><option value='Savannah Sparrow'>Savannah Sparrow</option><option value='Scarlet Tanager'>Scarlet Tanager</option><option value='Seaside Sparrow'>Seaside Sparrow</option><option value='Song Sparrow'>Song Sparrow</option><option value='Sora'>Sora</option><option value='Swainsons Thrush'>Swainson's Thrush</option><option value='Swamp Sparrow'>Swamp Sparrow</option><option value='Tennessee Warbler'>Tennessee Warbler</option><option value='Tufted Titmouse'>Tufted Titmouse</option><option value='Veery'>Veery</option><option value='Virginia Rail'>Virginia Rail</option><option value='White-breasted Nuthatch'>White-breasted Nuthatch</option><option value='White-crowned Sparrow'>White-crowned Sparrow</option><option value='White-eyed Vireo'>White-eyed Vireo</option><option value='White-throated Sparrow'>White-throated Sparrow</option><option value='Willow Flycatcher'>Willow Flycatcher</option><option value='Wilsons Warbler'>Wilson's Warbler</option><option value='Winter Wren'>Winter Wren</option><option value='Wood Thrush'>Wood Thrush</option><option value='Worm-eating Warbler'>Worm-eating Warbler</option><option value='Yellow Warbler'>Yellow Warbler</option><option value='Yellow-bellied Flycatcher'>Yellow-bellied Flycatcher</option><option value='Yellow-bellied Sapsucker'>Yellow-bellied Sapsucker</option><option value='Yellow-billed Cuckoo'>Yellow-billed Cuckoo</option><option value='Yellow-breasted Chat'>Yellow-breasted Chat</option><option value='Yellow-rumped Warbler'>Yellow-rumped Warbler</option><option value='Yellow-throated Vireo'>Yellow-throated Vireo</option>";
        
        
        
        
        
        
       
        //THE MAIN FUNCTION   
        $(route).change(function(){
            
            //CLEARS EVERYTHING WHEN ROUTE CHANGES
            document.getElementById("sites").innerHTML = "";
            
            var routeValue = route.value;
            
            //GETS NUMBER OF SITES PER SELECTED ROUTE
            siteCount = $(this.options[this.selectedIndex]).attr('data-sites');
            
            
            $("#sites").prepend('<div id="details_header" class="page_header"></div><div class="page_header_text">2. Site info</div>')
            
            //PREVIOUS BUTTON 
            $("#sites").prepend('<button class="navigation previous" id="previous" type="button">Previous</button>');
                $("#previous").click(function(){
                    $('html, body').animate({ scrollTop: 0 }, 'fast');
                    
                    $("#global_entries").css("display", "block");
                    $("#sites").css("display", "none");
                    $("#next").css("display", "block");
                    $("#next_summary").css("display", "none");
                    $("#previous").css("display", "none");
                });
            
            //PROVIDES SELECTED ROUTE TEXT AS HEADER ON DETAILS PAGE
            routeFullName = $('#routeSelect option:selected').text();
            $("#details_header").append(routeFullName);
            
            
            
            //CREATES THE SITES
            for (var i = 0; i < siteCount; i++){
                
                displayName = i + 1;
                
                $('#sites').append('<fieldset class="site" id="'+routeValue+''+i+'"><legend>Site '+displayName+' Number of Birds Found: <select id="numberSelect'+i+'" data-siteName='+i+' data-displayName='+displayName+'>'+birdCounter+'</select></legend><div id="'+routeValue+''+i+'Details"><div class="none_notes" id="noneNotesDiv'+i+'">Notes: <input type="text" id="noneNotes'+i+'" name="noneNotes'+i+'" /></div></fieldset>');
                
            
                //FEEDS NUMBER FOUND TO PHP - CAN BY MODIFIED BY THE CHANGE FUNCTION BELOW...
                $('#sites').append('<input type="hidden" id="site'+i+'NumberFound" name="site'+i+'NumberFound" value="none" />')
                
                
                
                
                
                
                
                
                var inputArray = this['input_array' + siteName];
                var arrayLength = this['arrayLength' + siteName];
                this['initiated' + siteName];
                
                
                
                //CREATES INPUT FIELDS CORRESPONDING TO THE NUMBER OF BIRDS FOUND - HIDDEN INPUT GENERATES THE SITENAME OUTPUT TO BE SENT TO PHP
                $('#numberSelect'+i+'').change(function(){
                    
                    
                    var displayName = this.getAttribute("data-displayName");
                    var siteName = this.getAttribute("data-siteName");
                    
                    if (displayName.length == 1){
                        displayName = 0 + displayName;
                    }
                    
                    numberFound = this.value;
                    //CLEARS AND REPLACES THE NUMBER FOUND ON CHANGE - SEE SLIGHTLY ABOVE... 
                    document.getElementById("site"+siteName+"NumberFound").value = numberFound;
                
                    
 
                    

                    
                    $("#noneNotes"+siteName+"").val('');
                    
                    
                    
                    
                    
    
                    
                    
                    if(this['initiated' + siteName]){
                        
                        if (numberFound == "none"){
                            numberFound = 0;
                            $("#noneNotesDiv"+siteName+"").show();
                        };
                        
                        
                        if (arrayLength > numberFound){
                            
                            for (i = arrayLength; i > numberFound; i--){
                                removeIDTag = i - 1;
                                $('#'+routeValue+''+siteName+'BirdDetails'+removeIDTag+'').remove();
                                inputArray.pop();
                                };
                            
                    
                            arrayLength = inputArray.length;
                            console.log("reduced array length = " + arrayLength)
                            }
                        
                        
                        
                        else{
                            
                            $("#noneNotesDiv"+siteName+"").hide();
                            
                            elementsAdd = numberFound - arrayLength;

                            for (y = 0; y < elementsAdd; y++){
                                
                                idTag = arrayLength + y;
                                
                                birdDisplayNumber = idTag + 1;
                        
                                newInput = ('<fieldset id="'+routeValue+''+siteName+'BirdDetails'+idTag+'" class="bird-details"><legend>Bird '+birdDisplayNumber+'</legend><div class="details_field">Species: <select class="species_select" id="'+siteName+'Bird'+idTag+'" name="bird['+idTag+']" data-birdNumber="'+idTag+'" data-siteName="'+siteName+'">'+speciesList+'</select><input type="hidden" class="siteID" name="site'+siteName+'" value="'+siteName+'" /></div><div class="details_field">Status: <input type="radio" id="'+siteName+'deadRadio'+idTag+'" name="deadInjuredRadio'+siteName+'['+idTag+']" value="dead" checked>Dead</input>&nbsp&nbsp<input type="radio" id="'+siteName+'injuredRadio'+idTag+'" name="deadInjuredRadio'+siteName+'['+idTag+']" value="injured">Injured</input></div><div class="details_field">Sex: <input type="radio" id="'+siteName+'maleRadio'+idTag+'" name="sexRadio'+siteName+'['+idTag+']" value="male">Male</input>&nbsp&nbsp<input type="radio" id="'+siteName+'femaleRadio'+idTag+'" name="sexRadio'+siteName+'['+idTag+']" value="female">Female</input>&nbsp&nbsp<input type="radio" name="sexRadio'+siteName+'['+idTag+']" id="'+siteName+'sexUnknownRadio'+idTag+'" value="unknown" checked>Unknown</input></div><div class="details_field">Age: <input type="radio" id="'+siteName+'adultRadio'+idTag+'" name="ageRadio'+siteName+'['+idTag+']" value="adult">Adult</input>&nbsp&nbsp<input type="radio" id="'+siteName+'juvenileRadio'+idTag+'" name="ageRadio'+siteName+'['+idTag+']" value="juvenile">Juvenile</input>&nbsp&nbsp<input type="radio" id="'+siteName+'ageUnkownRadio'+idTag+'" name="ageRadio'+siteName+'['+idTag+']" value="unknown" checked>Unknown</input></div><div class="details_field">Action: <select id="'+siteName+'Action'+idTag+'" class="action_select" name="action'+siteName+'['+idTag+']" data-birdNumber="'+idTag+'" data-siteName="'+siteName+'"><option disabled selected>Select action</option><option value="collected">Collected</option><option value="no change">No change</option><option value="captured and released">Captured and released</option><option value="transported to rehabber">Transported to rehabber</option><option value="other">Other (fill in "notes" section)</option></select></div><div class="details_field">Notes: <input type="text" id="'+siteName+'Notes'+idTag+'" name="notes'+siteName+'['+idTag+']" /></div><input type="hidden" id='+siteName+'compileField'+idTag+' name="compileField'+siteName+'['+idTag+']" /></fieldset>');
                        
                        
                        //COMPILER
                        $(document).on("change", "#"+siteName+"Bird"+idTag+"", function(){
                            bird = this.value;
                            birdNumber = this.getAttribute("data-birdNumber");
                            siteBirdNumber = displayName + "" + bird + "" + birdNumber;
                            document.getElementById(""+siteName+"compileField"+birdNumber+"").value = siteBirdNumber;
                        });
                                
                                $('#'+routeValue+''+siteName+'Details').append(newInput);
                                inputArray.push(newInput);  
                    };
                    
                        
                        arrayLength = inputArray.length;
                        console.log("extended array length = " + arrayLength)
                            
                            
                    };
                    
                    //END OF IF - EDITED DETAILS CREATION
                    }
                    
                    
                    
                    
                    
                    
                    else{
                        
                    $("#noneNotesDiv"+siteName+"").hide();
                    
                    this['initiated' + siteName] = true;
                    
                    inputArray = [];
                    
                    for (y = 0; y < numberFound; y++){
                        
                        birdDisplayNumber = y + 1
                        
                        inputArray.push('<fieldset id="'+routeValue+''+siteName+'BirdDetails'+y+'" class="bird-details"><legend>Bird '+birdDisplayNumber+'</legend><div class="details_field">Species: <select class="species_select" id="'+siteName+'Bird'+y+'" name="bird['+y+']" data-birdNumber="'+y+'" data-siteName="'+siteName+'">'+speciesList+'</select><input type="hidden" class="siteID" name="site'+siteName+'" value="'+siteName+'" /></div><div class="details_field">Status: <input type="radio" id="'+siteName+'deadRadio'+y+'" name="deadInjuredRadio'+siteName+'['+y+']" value="dead" checked>Dead</input>&nbsp&nbsp<input type="radio" id="'+siteName+'injuredRadio'+y+'" name="deadInjuredRadio'+siteName+'['+y+']" value="injured">Injured</input></div><div class="details_field">Sex: <input type="radio" id="'+siteName+'maleRadio'+y+'" name="sexRadio'+siteName+'['+y+']" value="male">Male</input>&nbsp&nbsp<input type="radio" id="'+siteName+'femaleRadio'+y+'" name="sexRadio'+siteName+'['+y+']" value="female">Female</input>&nbsp&nbsp<input type="radio" name="sexRadio'+siteName+'['+y+']" id="'+siteName+'sexUnknownRadio'+y+'" value="unknown" checked>Unknown</input></div><div class="details_field">Age: <input type="radio" id="'+siteName+'adultRadio'+y+'" name="ageRadio'+siteName+'['+y+']" value="adult">Adult</input>&nbsp&nbsp<input type="radio" id="'+siteName+'juvenileRadio'+y+'" name="ageRadio'+siteName+'['+y+']" value="juvenile">Juvenile</input>&nbsp&nbsp<input type="radio" id="'+siteName+'ageUnkownRadio'+y+'" name="ageRadio'+siteName+'['+y+']" value="unknown" checked>Unknown</input></div><div class="details_field">Action: <select id="'+siteName+'Action'+y+'" class="action_select" name="action'+siteName+'['+y+']" data-birdNumber="'+y+'" data-siteName="'+siteName+'"><option disabled selected>Select action</option><option value="collected">Collected</option><option value="no change">No change</option><option value="captured and released">Captured and released</option><option value="transported to rehabber">Transported to rehabber</option><option value="other">Other (fill in "notes" section)</option></select></div><div class="details_field">Notes: <input type="text" id="'+siteName+'Notes'+y+'" name="notes'+siteName+'['+y+']" /></div><input type="hidden" id='+siteName+'compileField'+y+' name="compileField'+siteName+'['+y+']" /></fieldset>');
                        
                        
                        //COMPILER
                        $(document).on("change", "#"+siteName+"Bird"+y+"", function(){
                            bird = this.value;
                            birdNumber = this.getAttribute("data-birdNumber");
                            siteBirdNumber = displayName + "" + bird + "" + birdNumber;
                            document.getElementById(""+siteName+"compileField"+birdNumber+"").value = siteBirdNumber;
                        });
                        
                    };
                    
                    $('#'+routeValue+''+siteName+'Details').append(inputArray);
                    arrayLength = inputArray.length;
                    console.log("inititial array length = " + arrayLength)
                    
                    //END OF ELSE - INITIAL DETAILS CREATION
                    };
                    

                    
                
    
                    
                //END OF NUMBER CHANGE
                }); 
                
                
            //END OF SITE CREATION    
            };
            
            
            
            
            
            
            
            

            
            
            $("#sites").append('<button class="navigation next" id="next_summary" type="button">Next</button>');
            
            

            
            
            
            
            
            
            
            
            
 
            
            $("#next_summary").click(function(){
                
                $('html, body').animate({ scrollTop: 0 }, 'fast');
                
                //VALIDATION
                var proceed = true;
                

                
                
                if (proceed) {
                $("#sites").css("display", "none");
                $("#previous").css("display", "none");
                $("#next_summary").css("display", "none");
                $("#summary").css("display", "block");
                $("#previous_details").css("display", "block");
                
                volunteer_name = document.getElementById("volunteer_name").value;
                date = document.getElementById("date").value;
                time = document.getElementById("hour").value + ":" + document.getElementById("minute").value + document.getElementById("ampm").value
                duration = document.getElementById("duration").value;
                weather = $('#weather option:selected').text();
                
                    document.getElementById("summary_name").innerHTML = "";
                    $("#summary_name").append(volunteer_name);
                
                    document.getElementById("summary_date").innerHTML = "";
                    $("#summary_date").append(date);
                
                    document.getElementById("summary_time").innerHTML = "";
                    $("#summary_time").append(time);
                
                    document.getElementById("summary_duration").innerHTML = "";
                    $("#summary_duration").append(duration + " minutes");
                
                    document.getElementById("summary_weather").innerHTML = "";
                    $("#summary_weather").append(weather);
                
                    document.getElementById("summary_route").innerHTML = "";
                    $("#summary_route").append(routeFullName);
                
                
                

                document.getElementById("site_summaries").innerHTML = "";
                

    
                
                for (i = 0; i < siteCount; i++){
                    displayName = i + 1;
                    
                    
                    $("#site_summaries").append('<div class="site_summary" id="site'+i+'"><div class="site_summary_header">Site '+displayName+'</div></div>');
                    
                    summaryNumberFound = document.getElementById("site"+i+"NumberFound").value;
                    
                    
                    
                    if (summaryNumberFound == 'none'){
                            summaryNotes = document.getElementById("noneNotes"+i+"").value;
                            $("#site"+i+"").append('<div class="individual_summary">Notes: '+summaryNotes+'</div>');
                        }
                    
                     
                    
                    else{
                    
                    for (z = 0; z < summaryNumberFound; z++){
                        
                        summaryBird = document.getElementById(""+i+"Bird"+z+"").value;
                    
                        
                        if (document.getElementById(''+i+'deadRadio'+z+'').checked) {
                            summaryDeadInjured = "Dead";
                            }
                        else {
                            summaryDeadInjured = "Injured";
                            };
                        
                        
                        if (document.getElementById(''+i+'maleRadio'+z+'').checked) {
                            summarySex = "Male";
                            }
                        else if (document.getElementById(''+i+'femaleRadio'+z+'').checked) {
                            summarySex = "Female";
                            }
                        else{
                            summarySex = "Unknown";
                            };
                        
                        
                        if (document.getElementById(''+i+'adultRadio'+z+'').checked) {
                            summaryAge = "Adult";
                            }
                        else if (document.getElementById(''+i+'juvenileRadio'+z+'').checked) {
                            summaryAge = "Juvenile";
                            }
                        else{
                            summaryAge = "Unknown";
                            };
                        
                        summaryAction = document.getElementById(""+i+"Action"+z+"").value;
                        
                        summaryNotes = document.getElementById(""+i+"Notes"+z+"").value;
                        
                        birdDisplayNumber = z + 1;
                            
                        $("#site"+i+"").append('<div class="individual_summary"><strong>Bird '+birdDisplayNumber+'</strong></br>Species: '+summaryBird+'</br>Status: '+summaryDeadInjured+'</br>Sex: '+summarySex+'</br>Age: '+summaryAge+'</br>Action: '+summaryAction+'</br>Notes: '+summaryNotes+'</div>');
                        
                        
                      
                        };
                    
                    };
                
                };
                
                        
                submitButton = '<input type="submit" class="navigation" id="submit_button" value="Submit" />';
                
                $("#summary").append(submitButton);
                    
                $("#submit_button").click(function() {
                    $("#submit_button").hide();
                    $("#previous_details").prop("disabled",true);
                    $("#previous_details").css("cursor","initial");
                    
                    $("#previous_details").on('mouseover', function () {
                        $(this).css('background', '#F5753F');
                        });
                        
                    
                    $("#summary").append('<div id="submitting" class="navigation animated flash small-12 columns">Submitting...</div>');
                    });
                
                };
            
                  
            //END OF SUMMARIZING CLICK FUNCTION
            });
        
        });
        
        
        

        
        
        
        
        
    //FIRST NEXT BUTTON
    $("#next").click(function(){
        
        $('html, body').animate({ scrollTop: 0 }, 'fast');
        
        //VALIDATION
        var routeField = document.forms["PSFIST_form"]["route"].value;
        
       
        if (routeField === "unchanged"){
                alert("Please select a route");
        }
        
        //ALL GOOD, MOVING ON
        else{
            $("#global_entries").css("display", "none");
            $("#sites").css("display", "block");
            $("#previous").css("display", "block");
            $("#next_summary").css("display", "block");
            $("#next").css("display", "none");
        };
         
    });
        
    
        
    $("#previous_details").click(function(){
        $('html, body').animate({ scrollTop: 0 }, 'fast');
        
        $("#submit_button").css("display", "none");
        $("#summary").css("display", "none");
        $("#sites").css("display", "block");
        $("#previous").css("display", "block");
        $("#next_summary").css("display", "block");
        $("#previous_details").css("display", "none");
        });
        
        
         
            
    </script>

</body>

</html>
